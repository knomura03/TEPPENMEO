# MCP（Playwright連携）手順書

## 目的
- Codexから画面操作を自動化し、UI確認の再現性を上げる
- 手動確認の漏れを減らす

## 前提
- MCPの設定は `~/.codex/config.toml` で管理される
- リポジトリには設定ファイルをコミットしない

## 導入の流れ（概要）
1. MCPのPlaywright連携を有効化する
2. Codexから画面操作の指示を実行できることを確認する
3. E2Eテストと併用して記録を残す

## 期待できるメリット
- スモークテストの自動化
- クリック手順の標準化
- PR本文にスクリーンショットや動作確認の証跡を残しやすい

## うまく動かない時の切り分け

### 1) CLIでの確認
- Playwrightのインストールと起動ができるか確認する
- `pnpm exec playwright --version` を実行する

### 2) IDE側での確認
- CodexのMCP設定が読み込まれているか確認する
- `~/.codex/config.toml` の該当セクションを見直す

### 3) 典型的な原因
- MCP設定のパスが誤っている
- Playwrightのブラウザが未インストール
- OS権限（画面収録/アクセシビリティ）が不足している

## 注意事項
- 設定ファイルはユーザー環境に依存するため、リポジトリに含めない
- 失敗した場合はE2E（Playwright）で代替し、PR本文に結果を記載する
