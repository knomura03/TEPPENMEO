# プロバイダ実機ヘルスチェック手順

## 目的
- Google / Meta の実装が公式仕様どおり動作しているかを、実APIの読み取りで確認する
- 失敗時に「原因（推定）/ 次にやること」を即判断できるようにする

## 前提
- システム管理者でログインしている
- 対象プロバイダが接続済み
- `PROVIDER_MOCK_MODE=false`（実API確認時）
- App Review/API承認が必要な場合は完了済み

## クリック手順（実機チェック）
1. `/admin/provider-health` を開く
2. Google または Meta のカードで **チェック実行** をクリック
3. 「読み取りAPI」の結果と次にやることを確認する

## 結果の見方（例）
- **OK**
  - 接続と読み取りAPIが成功
  - 次アクションなし
- **注意**
  - 権限不足 / 再認可が必要 / レート制限 など
  - 表示された次アクションに従う
- **未設定 / 未接続**
  - 環境変数や接続が不足
  - 設定 → 再接続 → 再チェック

## よくある結果と対処
- 権限不足（Meta）
  - App Reviewの承認状況を確認
  - ページのタスク権限（管理者/編集者）を確認
- API承認不足（Google）
  - Google Business ProfileのAPI承認を確認
  - 再認可を行ってスコープを再取得
- レート制限
  - 時間をおいて再実行

## やってはいけないこと
- トークン/シークレット/署名URLを画面やログに貼り付けない
- 読み取り以外のAPI（投稿作成など）を健康診断で実行しない

## 関連リンク
- 診断ページ: `/admin/diagnostics`
- API契約書: `docs/providers/api-contracts.md`
